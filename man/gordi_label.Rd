% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gordi_label.R
\name{gordi_label}
\alias{gordi_label}
\title{Draw and edit labels}
\usage{
gordi_label(
  pass,
  what = c("species", "sites", "predictor"),
  label = "",
  label_colour = "",
  shortcut = "",
  shortcut_colour = "",
  shortcut_length = 3,
  size = 3.9,
  alpha = "",
  scaling_coefficient = 0.9,
  nudge_x = 0,
  nudge_y = 0,
  max.overlaps = 10,
  repel_label = FALSE,
  show.legend = TRUE
)
}
\arguments{
\item{pass}{A list object produced by [gordi_read()]}

\item{what}{Character; which labels to draw/edit: one of \code{c('species', 'sites', 'predictor')}.}

\item{label}{Character; a column in env dataframe for sites or column name in env table for predictors are used for site and predictor labels, species name are column of names from \code{pass$species_name} - this cannot be changed.}

\item{label_colour}{Character; colour for non-shortcut labels (constant or column name).}

\item{shortcut}{Character; creates shortcuts of species names (for \code{what = 'species'} only).}

\item{shortcut_colour}{Character; colour for shortcut labels (constant or column name).}

\item{shortcut_length}{Integer; number of letters to take from genus/species for shortcuts.}

\item{size}{Numeric; text size in mm (as in \code{\link[ggplot2]{geom_text}}. Default size = 3.9.}

\item{scaling_coefficient}{Numeric; used to adjust predictor label positions. For more information see \code{\link{gordi_predict}}.}

\item{nudge_x}{Numeric; offset on x axis for label position. (passed to \code{\link[ggplot2]{geom_text}} or \code{\link[ggrepel]{geom_text_repel}}).}

\item{nudge_y}{Numeric; offset on y axis for label position (passed to \code{\link[ggplot2]{geom_text}} or \code{\link[ggrepel]{geom_text_repel}}).}

\item{max.overlaps}{Integer; maximum allowed overlaps for labels (when \code{repel_label = TRUE}). Details in \code{\link[ggrepel]{geom_text_repel}}. Default \code{max.overlaps = 10}}

\item{repel_label}{Logical; whether to use \code{\link[ggrepel]{geom_text_repel}} instead of \code{\link[ggplot2]{geom_text}}.}
}
\value{
The updated \code{pass} object with label layers added to \code{pass$plot}.
}
\description{
Adds or updates text labels for species, sites and predictors in the current ordination plot, stored in `pass$plot` (from either [gordi_species()], [gordi_sites()] or [gordi_predictor()]). 
It also takes the whole list object (pass), created by [gordi_read()].
The function can be called at any point in the pipeline, it removes any previously added label layers, so labels do not duplicate.
}
\details{
**what**
The argument `what` is compulsory, it chooses what labels to draw/edit:
- `what = 'species'` -> species labels at species scores 
- `what = 'sites'` -> site labels at site scores
- `what = 'predictor'` -> predictor labels at predictor scores (position is adjusted by `scaling_coefficient`)

\strong{Label source:}
If `shortcut` is not used, labels are taken from `label` (column name). If `label` stays empty, the defaults are:
\itemize{
   \item{species -> the first column of \code{pass$species_names} (species_names)}
   \item{sites -> the first column of \code{pass$env}}
   \item{predictor -> the first column of \code{pass$pred_df}}
If `shortcut` is defined (only works for \code{what = 'species'}), the function creates a label strings from genus and species (also subspecies, when present in the dataset) using the requested case and separator.
}

\strong{Colour control:}
If `label_colour` or `shortcut_colour` is a column name in the relevant data frame, the colour is mapped and a fresh colour scale is created with [ggnewscale::new_scale_colour()], so you can apply [gordi_colour()].
If `label_colour` or `shortcut_colour` is a constant (hex or colour name or colour number), the constant colour is used directly and no new colour scale is created.

\strong{Shortcut options:}
If the species name is \emph{Stipa eriocaulis}
\itemize{
   \item{'upper.lower' -> Sti.eri}
   \item{'lower.lower' -> sti.eri}
   \item{'upper.upper' -> Sti.Eri} 
   \item{'upperupper' -> StiEri}
   \item{'upper_lower' -> Sti_eri}
   \item{'lower_lower' -> sti_eri}
   \item{'upper_upper' -> Sti_Eri}
   \item{'upper-lower' -> Sti-eri}
   \item{'lower-lower' -> sti-eri}
   \item{'upper-upper' -> Sti-Eri}
   \item{'upper*lower' -> Sti*eri} 
   \item{lower*lower' -> sti*eri}
   \item{'upper*upper' -> Sti*Eri} 
}
}
\examples{
# species labels, black coloured text, default size
gordi_read(m, env) |> gordi_species(label = F) |> gordi_label(what = 'species')

#species shortcut labels, coloured by trait column, repelled
gordi_read(m, env, traits) |> 
   gordi_species(label = FALSE) |>
   gordi_label(what = 'species', shortcut = 'upper.lower', shortcut_colour = 'form', repel_label = TRUE)

#site labels by specific env column, constant colour
gordi_read(m, env) |> 
   gordi_sites() |>
   gordi_label(what = 'sites', label = 'elevation', label_colour = 'green')

}
\seealso{
[gordi_read()], [gordi_species()], [gordi_sites()], [gordi_colour()],[gordi_predict()], [ggplot2::ggplot()], [ggrepel::geom_text_repel()]
}
