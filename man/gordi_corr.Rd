% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gordi_corr.R
\name{gordi_corr}
\alias{gordi_corr}
\title{Correlate Environmental Variables with Ordination Axes and Plot}
\usage{
gordi_corr(
  pass,
  variables = "",
  permutations = 0,
  p_val_adjust = TRUE,
  p_val_adjust_method = "bonferroni",
  strata = NULL,
  label = F,
  colour = "",
  fill = "",
  alpha = "",
  linetype = "",
  linewidth = "",
  shape = "",
  size = "",
  arrow_size = 0.3,
  repel_label = F
)
}
\arguments{
\item{pass}{A list object produced by \code{\link{gordi_read}()} and containing the ordination results (\code{pass$m}) and environmental data (\code{pass$env}).}

\item{variables}{Character vector; names of the environmental variables (columns in \code{pass$env}) to fit onto the ordination. Required.}

\item{permutations}{Numeric; The number of permutations to use for significance testing with \code{\link[vegan]{envfit}}. Set to 0 to skip testing. Default is 0 (no test).}

\item{p_val_adjust}{Logical; Should p-values be adjusted for multiple comparisons? Uses an internal wrapper around \code{\link[stats]{p.adjust}}. Default is \code{TRUE}.}

\item{p_val_adjust_method}{Character; The method for p-value adjustment. See \code{\link[stats]{p.adjust}}. Default is 'bonferroni'.}

\item{strata}{Passed to \code{\link[vegan]{envfit}}; grouping variable for permutations.}

\item{colour}{Aesthetic; A column name to map to the colour of vectors (line) and factor centroids (point outline), or a constant colour.}

\item{fill}{Aesthetic; A column name to map to the fill colour of factor centroids (only works with shapes 21-25), or a constant colour.}

\item{alpha}{Aesthetic; A column name to map to transparency, or a constant numeric value (0 to 1).}

\item{linetype}{Aesthetic; A column name to map to linetype (vectors only), or a constant linetype (e.g., 1, 2, 'dotted', 'dashed').}

\item{linewidth}{Aesthetic; A column name to map to line width (vectors only), or a constant numeric value.}

\item{shape}{Aesthetic; A column name to map to point shape (factors only), or a constant numeric value (point shape).}

\item{size}{Aesthetic; A column name to map to point size (factors only), or a constant numeric value.}

\item{arrow_size}{Numeric; Size of the arrow heads for vectors, in 'cm'. Default is 0.3.}
}
\value{
The updated \code{pass} object with the environmental correlation layers added to \code{pass$plot} and the correlation statistics added to \code{pass$corr_stats}.
}
\description{
Passively fits environmental variables (vectors for numeric, centroids for factors) onto
the current ordination plot stored in `pass$plot` using \code{\link[vegan]{envfit}}.
}
\details{
The function calculates the correlation scores (vectors and factor centroids)
and optionally adjusts the p-values for multiple testing.

\strong{Plotting:}
\itemize{
  \item \strong{Vectors} (for numeric variables) are plotted as arrows using \code{\link[ggplot2]{geom_segment}}.
  \item \strong{Centroids} (for factor levels) are plotted as points using \code{\link[ggplot2]{geom_point}}.
}

Aesthetic arguments (\code{colour}, \code{fill}, \code{alpha}, etc.) can be set in two ways:
\enumerate{
  \item \strong{Mapping:} If the argument matches a column name in the internal \code{corr_coords} data frame (e.g., 'covariate' or 'type'), the aesthetic is mapped to that variable.
  \item \strong{Constant:} Otherwise, the value is used as a constant aesthetic (e.g., \code{colour = 'red'}).
}

Use \code{\link{gordi_colour}()} or \code{\link{gordi_shape}()} or other similar functions immediately after \code{gordi_corr()}
to define custom legends and scales for mapped aesthetics.
}
\examples{
\dontrun{
# Example data setup (assuming 'ord_model' and 'env_data' exist)
pass <- gordi_read(ord_model, env_data)

# 1. Simple plot with default aesthetics
pass |>
  gordi_corr(variables = c('pH', 'elevation', 'soil_type'))

# 2. Map vector colour to r2 (Continuous) and factor colour to 'covariate' (Discrete)
# Note: For separate legends, use gordi_colour after gordi_corr.
pass |>
  gordi_corr(variables = c('pH', 'soil_type'), colour = 'type', permutations = 999) |>
  gordi_colour(scale = 'discrete', name = 'Variable Type', values = c('vector'='black', 'factor'='red'))
}
}
