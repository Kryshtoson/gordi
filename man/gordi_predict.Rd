% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gordi_predict.R
\name{gordi_predict}
\alias{gordi_predict}
\title{Plot predictors from constrained ordination}
\usage{
gordi_predict(
  pass,
  scaling_coefficient = 0.9,
  label = c("label"),
  show_label = F,
  repel_label = F,
  colour = "",
  fill = "",
  alpha = "",
  linetype = "",
  linewidth = "",
  shape = "",
  size = "",
  arrow_size = 0.3
)
}
\arguments{
\item{pass}{A list object typically generated by a preceding function (e.g., \code{gordi_read()})
containing the ordination model (\code{pass$m}), scores, and plotting information
(\code{pass$plot}).}

\item{scaling_coefficient}{A numeric value used to scale the length of the
continuous predictor arrows relative to the overall plot range. A value of \code{0.9}
scales the longest arrow to 90\% of the plot's maximum extent. Scaling coefficient 
applies only to vector variables (arrows).}

\item{label}{The column name in the scores tibble to use for text labels. Defaults to
\code{'label'} which typically holds predictor names or factor levels. \emph{In the future, 
there may be more options how to label the points/arrows.}}

\item{show_label}{A logical value. If \code{TRUE}, text labels for the predictors are
added to the plot.}

\item{repel_label}{A logical value. If \code{TRUE}, \code{ggrepel::geom_text_repel}
is used to prevent text labels from overlapping. Requires \code{show_label = TRUE}.}

\item{colour}{Aesthetic for the predictor points/arrows. Can be a \strong{column name} in
\code{pass$predictor_scores} to map the aesthetic, or a constant color value.}

\item{fill}{Aesthetic for the fill color of categorical predictor points (centroids).
Accepts column names or constant values.}

\item{alpha}{Aesthetic for transparency. Accepts column names or constant numeric value (0 to 1).}

\item{linetype}{Aesthetic for the arrow line type (continuous predictors). Accepts column
names or a constant line type (e.g., \code{1} or \code{'dashed'}).}

\item{linewidth}{Aesthetic for the arrow line width. Accepts column names or a constant
numeric value.}

\item{shape}{Aesthetic for the point shape (categorical predictors). Accepts column names
or a constant numeric value (e.g., \code{16} for a solid circle).}

\item{size}{Aesthetic for the point size (categorical predictors). Accepts column names
or a constant numeric value.}

\item{arrow_size}{A numeric value defining the size of the arrowhead in **cm** (used with
\code{unit()} from the \code{grid} package).}
}
\value{
The function returns the modified \code{pass} list object, which now contains:
\itemize{
  \item \code{pass$predictor_scores}: A tibble containing all main and interaction predictor scores.
  \item \code{pass$plot}: The updated \code{ggplot} object with the predictor scores added.
}
}
\description{
!!!THIS IS EXPERIMENTAL VERSION!!! This function takes the result 
from [gordi_read()] and creates plot with predictor arrows (for continuous variables)
and points (for categorical variables, i.e., centroids). Similarly to [gordi_species()]
and [gordi_sites()], a wide range of graphing parameters can be set, such as colour,
fill, size, shape, alpha, stroke, and more traditional ggplot arguments, which can read
both, static and dynamic variable (e.g., 'red' or 'elevation').
}
\details{
\itemize{
  \item Continuous variables are plotted as \strong{arrows} (biplot scores). The length of these
    arrows is scaled by the argument \code{scaling_coefficient}.
  \item Categorical variables are plotted as \strong{centroids} of site 'lc' scores (factor scores).
  \item \strong{Interaction terms} are calculated post-hoc using \code{vegan::envfit} with
    \code{display = 'lc'} (linear combinations) and plotted as arrows/points accordingly.
  \item Aesthetics (\code{colour}, \code{size}, etc.) are handled dynamically: if the input
    matches a column name in the predictor scores, it is \strong{mapped} (value of the aestethics
    reflects some variable); otherwise, it is treated as a \strong{constant} aesthetic
    (every point/arrow have the same colour, size, shape...).
}
}
\section{Constraints}{

The function only supports \strong{constrained ordinations} (\code{RDA}, \code{CCA}, \code{db-RDA}).
For plotting passively fitted environmental variables on an unconstrained plot, use
\code{gordi_corr()}.

#' @examples 
library(vegan)

data(dune)
data(dune.env)

# --- 1. Example with main effects ---
m1 <- capscale(dune ~ A1 + Management, data = dune.env)
gordi_read(m1, env = dune.env, scaling = 'species', correlation = T) |>
   gordi_species(label = F) |>
   # Predictors (A1: continuous arrow, Management: categorical centroids)
   # Colour is dynamically mapped to the 'score' column (biplot or centroid)
   gordi_predict(scaling_coefficient = 1, colour = 'score', size = 4)

# --- 2. Example with an interaction term ---
# The interaction term will be calculated post-hoc via envfit
m2 <- capscale(dune ~ A1 * Management, data = dune.env)
gordi_read(m2, env = dune.env, scaling = 'species', correlation = T) |>
   gordi_sites() |>
   # Predictors include main effects and interaction effects (e.g., A1:Management)
   gordi_predict(show_label = T, repel_label = T, colour = 'score', size = 3)
}

